<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Raw Journal Messages</title>
    <link rel="stylesheet" href="/static/cockpit.css"/>
    <script src="https://code.jquery.com/jquery-3.6.3.min.js"
            integrity="sha256-pvPw+upLPUjgMXY0G+8O0xUf+/Im1MZjXxxgOcBQBXU="
            crossorigin="anonymous"
            referrerpolicy="no-referrer"></script>
    <script type="module" src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.1.1/chart.min.js"
        integrity="sha512-MC1YbhseV2uYKljGJb7icPOjzF2k6mihfApPyPhEAo3NsLUW0bpgtL4xYWK1B+1OuSrUkfOTfhxrRKCz/Jp3rQ=="
        crossorigin="anonymous"
        referrerpolicy="no-referrer"></script>

</head>
<body>

<h1>EDMC Dashboard Events</h1>
<pre id="logs">
</pre>

<script type="text/javascript">
    const logs = (text, color) => {
        let $logs = $('#logs');
        $logs.prepend(text + "\n");
        let txt = $logs.text();
        $logs.text(txt.substring(0, 4096));
    };

    const socket = new WebSocket('ws://' + location.host + '/dash/events');
    socket.addEventListener('message', ev => {
        logs('<<< ' + ev.data, 'orange');
    });

</script>
</body>
</html>